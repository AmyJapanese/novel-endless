# Novel Endless – 無限マルコフ連鎖プログラム

> 「`novels/` に置いたテキストをコーパスにして、延々と“それっぽい文章”を吐き続ける」
> そんな実験用ツールです。Python + 形態素解析（fugashi）で、軽く・雑に・速く。

---

## 概要

* `novels/` フォルダに入れた **生テキスト（.txt）** を読み込み、
  **マルコフ連鎖** で文章を生成します。
* 生成は **「エンドレスモード」**（止めるまで流し続ける）と
  **「回数モード」**（指定回数だけ生成）の2種類から選べます。

---

## できること

* ✅ マルコフ連鎖で文章を無限生成
* ✅ エンドレスモード / 回数モードの選択
* ✅ 追加の前処理は不要（**分かち書きは fugashi が自動**）

---

## 動作確認

* **OS / マシン**: Surface Laptop Go 2（Windows 11）で動作確認
* **Python**: 3.x 系

> 他環境でも動くはずですが未検証です。PR/Issue 歓迎。

---

## 必要環境

* **Python 3.x**
* **fugashi**（形態素解析ライブラリ）

  * 環境によっては辞書（例: `unidic-lite`）が必要になる場合があります。

---

## インストール方法

0. pythonをインストール（リンクはコチラ→https://www.python.org/downloads/）

1. リポジトリを取得

```bash
git clone https://github.com/AmyJapanese/novel-endless.git
cd novel-endless
```

2. 依存をインストール
   （最低限 `fugashi`。辞書が未設定なら `unidic-lite` を併せて入れると手早いです）

```bash
# どちらか（または両方）
pip install fugashi
# 必要に応じて
pip install unidic-lite
```

> ※ OS や Python の環境によっては追加のビルドツールが必要になることがあります。

---

## 使い方

### 0. `novels/` フォルダを作成

novelendlessがあるフォルダ内に `novels` ディレクトリを用意します。

### 1. コーパスを入れる

`novels/` に **生のテキストファイル（UTF-8 推奨）** を置きます。
分かち書きは不要です（fugashi が自動でやります）。

```
novel-endless/
├─ novelendless.py
└─ novels/
   ├─ a.txt
   ├─ b.txt
   └─ c.txt
```

### 2. 実行

```bash
# Windows
py novelendless.py

# macOS / Linux
python3 novelendless.py
```

### 3. モード選択

起動後は CLI の指示に従ってください。

* **エンドレスモード**: 生成を止めるまで延々と出力
* **回数モード**: 指定した回数だけ文を生成して終了

---

## オプション / 設定（概要）

実装により細部は変わりますが、一般的に次のような項目をコード内で調整できます。

* **N-gram の長さ**（例: `N = 2 or 3`）
* **1文あたりの最大トークン長**（生成の暴走防止用）
* **終了トークン**（例: `。` などの句点で文を切る）
* **乱数シード**（再現性が欲しいとき）

> 具体的な変数名は `novelendless.py` を参照してください。

---

## 仕組み（ざっくり）

1. `novels/` の全 `.txt` を読み込み
2. **fugashi** で分かち書き / トークン化
3. **N-gram** をカウントして **遷移確率** を作成
4. 乱択で次トークンを選び、終了トークンが来たら1文を確定
5. 以後、モードに応じて繰り返し

---

## ヒント / ベストプラクティス

* **コーパスは増やすほど“それっぽさ”が上がる**傾向。
  単一作品よりも、同一文体の複数テキストを混ぜると安定します。
* 文末記号（`。` など）を **終了トークン** として扱うと読みやすくなります。
* **句読点や改行のノイズ**が多いと破綻しやすいので、気になる場合は事前整形も効果的。

---

## トラブルシューティング

* **辞書関連のエラーが出る**
  → `pip install unidic-lite` を試してください。
  → もしくは Unidic を導入し、fugashi から参照できるよう設定します。

* **文字化けする**
  → 入力テキストを **UTF-8** に統一してください。

* **出力がすぐ途切れる / ループする**
  → コーパスが少ない、または N が大きすぎる可能性。
  テキストを増やすか、 N を下げてください。

---

## 免責事項

このリポジトリは「マルコフ連鎖の原理を楽しむ」ことを目的としています。
著作物の再現や模倣を意図するものではありません。

このプログラムは**娯楽目的**で作られています。
**品質・整合性・情報の正確性は一ミリも考えていません。**

何が起きても笑って許せる方向けです。

---

## 著作権について（注意）

📁 novels/ に入れるテキストや出力されたデータの取り扱いは、すべて自己責任でお願いします。

第三者の著作物（商業小説・漫画・記事など）を入力コーパスに使用する場合、
著作権や利用規約に十分ご注意ください。

特に、有名作品をそのまま使い、それをネット上に公開すると**著作権侵害になり得ます** 。
（訓練じゃなくて出力が「似てる」だけでもトラブルになる時代です）

⚠️ なお、本プログラムの作者は**一切の法的責任を負いません**。
もし裁判ざたになっても、こっちは一切関与できません。ほんとに。

### じゃあどんなのを使えばいいの？
- このリポジトリにデモ用のデータは入っていません。
- パブリックドメインの文章（例：青空文庫）を使ってください。
- 自分で書いたテキストを使うのがもっとも安全です。
- **商用小説をそのまま入れて生成した結果を公開しないでください。**

---

## ライセンス

**MIT License**

---

## クレジット / インスパイア元

* 本プログラムはバーグハンバーグバーグ氏の **「[校長先生の話エンドレス](https://koucho-endless.com/)」** に影響を受けています。感謝。

---

## 貢献

バグ報告・改善提案・PR 大歓迎です。
簡単な README 修正でも助かります。

---

### さいごに

気楽に回して、気楽に眺める。
「意味」より「手触り」を遊ぶ小さな道具です。気に入ったら★をどうぞ。
